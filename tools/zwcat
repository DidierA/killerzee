#!/bin/sh
# this tool is intended to be used to merge two pcap files generated by zwdump and readable by zwreplay
#
# usage is like cat:
# zwcat <filename> [filename] [filename ...] >destination
#

if [ -z "$1" -o "$1" = "-h" -o "$1" = "--help" ] ; then
    echo "Usage : `basename $0` <filename> [filename] >destination " >&2
    echo "concatenantes zwdump output files into destination." >&2
    return 1
fi

# dump first file directly with pcap header
cat "$1"
# dump all other files without pcapheader
shift
for file in "$@" ; do
    # PCAPHLEN is 24 bytes in pcapdump.py 
    dd if="$file" bs=1 skip=24 status=none
done
